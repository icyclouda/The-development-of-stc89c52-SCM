# c51

![屏幕截图 2022-09-21 123450.png](c51%20f3ac105c380e47318dac2e8b73d6d41c/%25E5%25B1%258F%25E5%25B9%2595%25E6%2588%25AA%25E5%259B%25BE_2022-09-21_123450.png)

sfr：特殊功能寄存器声明

sfr14：sfr的十六位数据声明

sbit：特殊功能位声明

bit：位变量声明

位变量指的是：一个变量是char型的，八位，bit表示一位。位变量表示8位只用其中的1位

sfr scon=0x98

定位了一个寄存器：寄存器在单片机内部有地址，要在使用前定义一下。

sbit ov =psw^2:

psw是寄存器，psw^2表示寄存器的第二位，并定义为ov，以后ov就是指寄存器的第二位

## 数据的存储类型

char()【不表明则默认为有符号型】 变量名：var1

bit（）：falgs

unsigned char：vextor【】

int： wwww

## 头文件

reg51.h

reg52.h

> 此两种内部封闭定义了两种寄存器，记得写include regxx
> 

math.h()

> 定义常用数学运算（里面有已经编好的程序）
> 

ctype

stdio.h

stdlib.h

absacc.h

（将单片机和软件连接起来）

## 运算符

逻辑与：&&(一位或一位之间：0&&1=0)

逻辑或：||

逻辑非：！

>><<：位右移和位左移（一个字节有8位：把八位数都向右（左）移，去掉首位，最高位补零）

循环右移、循环左移：不补零，而是移动

&  |：按位与  按位或（

5&2=0101（二进制数）&0010

0&&1   0&&1 0&&0 1&&0最后是0

）

## 基本语句

if   

while     

for    

switch\case    多分只选择语言

do-while\    循环语言

## 中断服务程序

函数名（）interrupt n using m {

函数内部实现…

}

I/0口定义

sbit brrp=P2^3

## 单片机重点：

最小系统运行的必要条件

1.电源 2.晶振 （单片机左下角，椭圆形【提供能量、驱动】）3.复位电路 （运行之前一定要复位一次）

51单片机四组io口，每组八个：

1.输出控制电频平高低

2.输入检测电平高低

定时器：

外部中断，定时器、串口中断

![屏幕截图 2022-09-21 184627.png](c51%20f3ac105c380e47318dac2e8b73d6d41c/%25E5%25B1%258F%25E5%25B9%2595%25E6%2588%25AA%25E5%259B%25BE_2022-09-21_184627.png)

本质：控制io管脚

dip40脚座

杜邦线单头带帽40根

排针两排

小电路板一块、焊锡

ds12c887一片

## 单片机

数字相同即物理连接，

排阻就是封装好的电阻（电阻值？发光二极管点亮电流：3A-10A【1.7v左右】所以R=1k）

vcc：+5v

cj1(10uf):电容：稳压，滤波

## 锁存器

diola：扩展的功能 

out enable：OE输出使能头顶加-（只有OE是低电平芯片才能工作）接地

![屏幕截图 2022-09-21 213240.png](c51%20f3ac105c380e47318dac2e8b73d6d41c/%25E5%25B1%258F%25E5%25B9%2595%25E6%2588%25AA%25E5%259B%25BE_2022-09-21_213240.png)

AD将模拟信号转为数字信号

51单片机上电后所有端口默认是高电平

故点亮灯就输出低电压

## 烧录

注意串口

只能下载hex文件

先下载再接通电源

<aside>
💡 注意要学模电和数电

</aside>

## while语句

while（）

內部可为空，只要里面不是0就执行语句

a- -: a-=1

大循环

while（1）让程序停在某一行

 

```c
void m(unsigned int z)
{
	unsigned int x,y;
	for(x=z;x>0;x--)
	  for (y=100;y>0;y--);
}

```

| m | sec |
| --- | --- |
| 10 | 0.004 |
| 20 | 0.012 |
| 50 | 0.032 |
| 100 | 0.04 |
| 200 | 0,08 |
| 500 | 0.2 |
| 1000 | 0.4 |
| 2000 | 0.8 |
| x(k) | sec=0.4x |

## 引脚

P3.2外部中断0输入

P3.3外部中断1输入

T0定时器0外部输入

T1定时器1外部输入

WR外部写控制

RD外部读控制

xtal1、xtal2：晶振输入输出端

![屏幕截图 2022-10-01 230016.png](c51%20f3ac105c380e47318dac2e8b73d6d41c/%25E5%25B1%258F%25E5%25B9%2595%25E6%2588%25AA%25E5%259B%25BE_2022-10-01_230016.png)

晶振电路的非极性电容？帮助上电的时候给晶振起电。

12mhz用30pf的电容     6mhz用20pf

rst复位电路（复位电压达到5v）

![屏幕截图 2022-10-01 225641.png](c51%20f3ac105c380e47318dac2e8b73d6d41c/%25E5%25B1%258F%25E5%25B9%2595%25E6%2588%25AA%25E5%259B%25BE_2022-10-01_225641.png)

{电容的话，只要放电高于5v且达到24个时钟周期}

vpp：编程用高压

ale ：正常工作时，输出1/6时钟周期的方波，检测单片机是否在正常工作，可以接示波器

ea：超过4kb执行外部程序